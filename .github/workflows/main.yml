name: CI/CD Pipeline

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]
  workflow_dispatch:  # Allow manual trigger

jobs:
  test:
    uses: ./.github/workflows/test.yml

  check-changes:
    needs: test
    uses: ./.github/workflows/check-changes.yml

  release:
    needs: check-changes
    if: needs.check-changes.outputs.has_changes == 'true'
    uses: ./.github/workflows/release.yml 